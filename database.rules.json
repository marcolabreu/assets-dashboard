{
  "rules": {
    ".read": "auth != null",
    ".write": "auth != null",
    "funds": {
      "$fund_id": {
        ".indexOn": ".value",
        ".validate": "newData.isString() && newData.hasChildren(['subfunds'])",
        "subfunds": {
          ".validate": "newData.isString() && newData.hasChildren(['$subfund_id'])",
          "$subfund_id": {
            ".indexOn": ".value",
            ".validate": "newData.isString() && newData.hasChildren(['share_classes'])",
            "share_classes": {
              ".validate": "newData.isString() && newData.hasChildren(['$share_class_id'])",
              "$share_class_id": {
                ".indexOn": [".value", "uid"],
                ".validate": "newData.isString() && newData.hasChildren(['uid'])",
                "uid": {
                  ".validate": "newData.isString() && newData.val().length === 12"
                }
              }
            }
          }
        }
      }
    },
    "reports_by_date": {
      "$date": {
        ".indexOn": ".value",
        ".validate": "newData.isString() && newData.val().length === 6 && newData.hasChildren(['$uid'])",
        "$uid": {
          ".indexOn": ".value",
          ".validate": "newData.isString() && newData.val().length === 12 && newData.hasChildren(['nb_alerts', 'report_status'])",
          "nb_alerts": {
            ".validate": "newData.isNumber()"
          },
          "report_status": {
            ".validate": "newData.isBoolean()"
          }
        }
      }
    },
    "reports_by_uid": {
      "$uid": {
        ".indexOn": ".value",
        ".validate": "newData.isString() && newData.val().length === 12 && newData.hasChildren(['$date'])",
        "$date": {
          ".indexOn": ".value",
          ".validate": "newData.isString() && newData.val().length === 6 && newData.hasChildren(['nb_alerts', 'report_status'])",
          "nb_alerts": {
            ".validate": "newData.isNumber()"
          },
          "report_status": {
            ".validate": "newData.isBoolean()"
          }
        }
      }
    }
  }
}
